\subsection{Ternary Diagrams}

\begin{pgfplotslibrary}{ternary}
	A library to draw ternary diagrams.

	A ternary diagram visualizes three--component systems such that the sum of them yields $100\%$. Ternary phase diagrams are visualized as triangular axes.
\end{pgfplotslibrary}


\begin{environment}{{ternaryaxis}\oarg{options}}
	The axis environment for ternary axes.

\begin{codeexample}[]
\begin{tikzpicture}
\begin{ternaryaxis}
	\addplot3 coordinates {
	    (0.81,	0.19,	0.00)
	    (0.76,	0.17,	0.07)
	    (0.66,	0.16,	0.16)
	    (0.76,	0.07,	0.17)
	    (0.81,	0.00,	0.19)
	};

	\addplot3 coordinates {
	    (0.85,	0.15,	0.00)
	    (0.82,	0.13,	0.05)
	    (0.73,	0.14,	0.13)
	    (0.82,	0.06,	0.13)
	    (0.84,	0.00,	0.16)
	};
	\legend{$10$\textdegree, $20$\textdegree}
\end{ternaryaxis}
\end{tikzpicture}
\end{codeexample}

\begin{codeexample}[]
\begin{tikzpicture}
\begin{ternaryaxis}[xlabel=A,ylabel=B,zlabel=C]
	\addplot3 coordinates {
        (0.81,  0.19,  0.00)
        (0.76,  0.17,  0.07)
        (0.66,  0.16,  0.16)
        (0.76,  0.07,  0.17)
        (0.81,  0.00,  0.19)
	};

	\addplot3 coordinates {
        (0.85,  0.15,  0.00)
        (0.82,  0.13,  0.05)
        (0.73,  0.14,  0.13)
        (0.82,  0.06,  0.13)
        (0.84,  0.00,  0.16)
	};
	\legend{$10$\textdegree, $20$\textdegree}
\end{ternaryaxis}
\end{tikzpicture}
\end{codeexample}
\end{environment}

\begin{codeexample}[]
\begin{tikzpicture}
\begin{ternaryaxis}[xlabel=A,ylabel=B,zlabel=C,xmin=0.5]
	\addplot3 coordinates {
        (0.81,  0.19,  0.00)
        (0.76,  0.17,  0.07)
        (0.66,  0.16,  0.16)
        (0.76,  0.07,  0.17)
        (0.81,  0.00,  0.19)
	};

	\addplot3 coordinates {
        (0.85,  0.15,  0.00)
        (0.82,  0.13,  0.05)
        (0.73,  0.14,  0.13)
        (0.82,  0.06,  0.13)
        (0.84,  0.00,  0.16)
	};
	\legend{$10$\textdegree, $20$\textdegree}
\end{ternaryaxis}
\end{tikzpicture}
\end{codeexample}


\begin{codeexample}[]
\begin{tikzpicture}
\begin{ternaryaxis}[
	xlabel=Water,
	ylabel=D--Threonine,
	zlabel=L--Threonine,
	label style={sloped}
]
	\addplot3 coordinates {
        (0.82,  0.18,  0.00)
        (0.75,  0.17,  0.08)
        (0.77,  0.12,  0.11)
        (0.75,  0.08,  0.17)
        (0.81,  0.00,  0.19)
	};
	\addplot3 coordinates {
        (0.75,  0.25,  0.00)
        (0.69,  0.25,  0.06)
        (0.64,  0.24,  0.12)
        (0.655, 0.23,  0.115)
        (0.67,  0.17,  0.16)
        (0.66,  0.12,  0.22)
        (0.64,  0.11,  0.25)
        (0.69,  0.05,  0.26)
        (0.76,  0.01,  0.23)
	};
	\legend{$10$\textdegree, $20$\textdegree}
\end{ternaryaxis}
\end{tikzpicture}
\end{codeexample}

\begin{pgfplotskey}{ternary limits relative=\mchoice{true,false} (initially true)}
	Allows to switch tick labels between relative numbers in the range $[0,100]$ or absolute numbers.
	
	Absolute coordinates use the coordinate range as lower and upper limits.
\end{pgfplotskey}

\begin{stylekey}{/pgfplots/every ternary axis}
	A style which is installed at the beginning of every ternary axis. It is used to adjust some of the \PGFPlots\ keys to fit the triangular shape.

	The initial configuration is
\begin{codeexample}[code only]
\pgfplotsset{
	every ternary axis/.style={
		/pgfplots/tick align=outside,
		grid=major,
		xticklabel style={anchor=west},
		every 3d description/.style={},
		every axis x label/.style={at={(ticklabel cs:0.5)},anchor=near ticklabel},
		every axis y label/.style={at={(ticklabel cs:0.5)},anchor=near ticklabel},
		every axis z label/.style={at={(ticklabel cs:0.5)},anchor=near ticklabel},
		every x tick scale label/.style={at={(xticklabel cs:0.95,5pt)},anchor=near xticklabel,inner sep=0pt},
		every y tick scale label/.style={at={(yticklabel cs:0.95,5pt)},anchor=near yticklabel,inner sep=0pt},
		every z tick scale label/.style={at={(yticklabel cs:0.95,5pt)},anchor=near yticklabel,inner sep=0pt},
		every axis title shift=15pt,
		every axis legend/.style={
			cells={anchor=center},
			inner xsep=3pt,inner ysep=2pt,nodes={inner sep=2pt,text depth=0.15em},
			shape=rectangle,
			fill=white,
			draw=black,
			at={(1.03,1.03)},
			anchor=north west,
		},
	},
}
\end{codeexample}
\end{stylekey}
