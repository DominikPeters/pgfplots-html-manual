%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Package pgfplots.sty documentation. 
%
% Copyright 2007/2008 by Christian Feuersaenger.
%
% This program is free software: you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation, either version 3 of the License, or
% (at your option) any later version.
% 
% This program is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU General Public License for more details.
% 
% You should have received a copy of the GNU General Public License
% along with this program.  If not, see <http://www.gnu.org/licenses/>.
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{pgfplots.preamble.tex}

\pgfqkeys{/codeexample}{%
	every codeexample/.style={
		width=4cm,
		/pgfplots/every axis/.append style={legend style={fill=graphicbackground}}
	},
	tabsize=4,
}

\def\PGFPlotstable{\textbf{pgfplotstable}}

\title{%
	Manual for Package \PGFPlotstable\\
	{\small Component of \PGFPlots, Version \pgfplotsversion}\\
	{\small\href{http://sourceforge.net/projects/pgfplots}{http://sourceforge.net/projects/pgfplots}}}

\begin{document}
\maketitle
\begin{abstract}%
	This package reads tab-separated numerical tables from input and generates code for pretty-printed \LaTeX-tabulars. It rounds to the desired precision and prints it in different number formatting styles.
\end{abstract}
\tableofcontents
\section{Introduction}
\PGFPlotstable\ is a lightweight sub-package of \PGFPlots\ which employs the table input methods and the number formatting techniques to convert tab-separated tables into tabulars.

It is used with
\begin{codeexample}[code only]
\usepackage{pgfplots}
\end{codeexample}
\noindent and requires \PGFPlots\ and \PGF\ installed.

\section{The package}
\PGFPlotstable\ works with space-separated tables. Those tables can have a header line which contains column names and most other columns typically contain numerical data.

\noindent The following listing shows |pgfplotstable.example1.dat| and is used often throughout this documentation.
\begin{codeexample}[code only]
# Convergence results
# fictional source, generated 2008
level   dof     error1  error2  info    grad(log(dof),log(error1))      quot(error1)    
1       9       2.50000000e-01  7.57858283e-01  48      0       0       
2       25      6.25000000e-02  5.00000000e-01  25      -1.35691545e+00 4       
3       81      1.56250000e-02  2.87174589e-01  41      -1.17924958e+00 4       
4       289     3.90625000e-03  1.43587294e-01  8       -1.08987331e+00 4       
5       1089    9.76562500e-04  4.41941738e-02  22      -1.04500712e+00 4       
6       4225    2.44140625e-04  1.69802322e-02  46      -1.02252239e+00 4       
7       16641   6.10351562e-05  8.20091159e-03  40      -1.01126607e+00 4       
8       66049   1.52587891e-05  3.90625000e-03  48      -1.00563427e+00 3.99999999e+00  
9       263169  3.81469727e-06  1.95312500e-03  33      -1.00281745e+00 4.00000001e+00  
10      1050625 9.53674316e-07  9.76562500e-04  2       -1.00140880e+00 4.00000001e+00  
\end{codeexample}
Lines starting with `|\%|' or `|\#|' are considered to be comment lines and are ignored.

\begin{command}{\pgfplotstabletypesetfile[\meta{optional arguments}]\marg{file name}}
	This command loads the table file \marg{file name} and typesets it using the current configuration of number formats and table options.
\begin{codeexample}[]
\pgfplotstabletypesetfile{pgfplotstable.example1.dat}
\end{codeexample}

	\noindent The configuration can be customized with \meta{optional arguments}.

\begin{codeexample}[]
\pgfplotstabletypesetfile[sci subscript,sci zerofill]{pgfplotstable.example1.dat}
\end{codeexample}
\end{command}

% FIXME : 'header' option!
\begin{command}{\pgfplotstableread\marg{file name}\marg{\textbackslash macro}}
	Loads the table \marg{file name} into a \TeX-macro \meta{\textbackslash macro}. This macro can than be used several times.
\begin{codeexample}[]
\pgfplotstableread{pgfplotstable.example1.dat}\table
\pgfplotstabletypeset[columns={dof,error1}]\table
\hspace{2cm}
\pgfplotstabletypeset[columns={dof,error2}]\table
\end{codeexample}
\end{command}

\begin{command}{\pgfplotstabletypeset[\meta{optional arguments}]\marg{\textbackslash macro}}
	Works in the same way as |\pgfplotstabletypesetfile|, but it accepts an already loaded table.
\end{command}

\subsection{Selecting columns}
\begin{key}{/pgfplots/table/columns=\marg{comma-separated-list} (initially all available ones)}
	Selects particular columns the table. If this option is missing, all available columns will be selected.

	Inside of \marg{comma-separated-list}, column names as they appear in the table's header are expected. If there is no header, simply use column names. If there are column names, the special syntax |[index]|\meta{integer} can be used to select columns by index. The first column has index~$0$.
\begin{codeexample}[]
\pgfplotstabletypesetfile[columns={dof,level,[index]4}]{pgfplotstable.example1.dat}
\end{codeexample}
\end{key}

\begin{pgfplotstablecolumnkey}
	Sets all options in \marg{key-value-list} exclusively for \marg{column name}.

\begin{codeexample}[]
\pgfplotstabletypesetfile[
	columns/error1/.style={
		column name=$L_2$,
		sci,sci zerofill,sci subscript,
		precision=3},
	columns/error2/.style={
		column name=$A$,
		sci,sci zerofill,sci subscript,
		precision=2},
	columns/dof/.style={
		int detect,
		column name=\textsc{Dof}
	}
]
	{pgfplotstable.example1.dat}
\end{codeexample}
	If your column name contains commas `|,|', slashes `|/|' or equal signs `|=|', you need to enclose the column name in braces.
\begin{codeexample}[width=7cm]
\pgfplotstabletypesetfile[
	columns={dof,error1,{grad(log(dof),log(error1))}},
	columns/error1/.style={
		column name=$L_2$,
		sci,sci zerofill,sci subscript,
		precision=3},
	columns/dof/.style={
		int detect,
		column name=\textsc{Dof}},
	columns/{grad(log(dof),log(error1))}/.style={
		column name=slopes $L_2$,
		fixed,fixed zerofill,
		precision=1}
]
	{pgfplotstable.example1.dat}
\end{codeexample}
\end{pgfplotstablecolumnkey}

\begin{key}{/pgfplots/table/column type=\marg{tabular column type} (initially c)}
	
\end{key}


\begin{codekey}{/pgfplots/table/assign column name}
	
\end{codekey}

\begin{stylekey}{/pgfplots/table/multicolumn names=\marg{tabular column type} (initially c)}
	
\end{stylekey}

\begin{stylekey}{/pgfplots/table/dcolumn=\marg{tabular column type}\marg{type for column name} (initially \{D\{.\}\{.\}\{2\}\}\{c\})}
	
\end{stylekey}

\begin{stylekey}{/pgfplots/table/every first column}
\end{stylekey}

\begin{stylekey}{/pgfplots/table/every last column}
\end{stylekey}

\begin{stylekey}{/pgfplots/table/every even column}
\end{stylekey}

\begin{stylekey}{/pgfplots/table/every odd column}
\end{stylekey}

\subsection{Configuring row appearance}
\begin{key}{/pgfplots/before row}	
\end{key}

\begin{key}{/pgfplots/after row}	
\end{key}

\begin{stylekey}{/pgfplots/every even row}	
\end{stylekey}

\begin{stylekey}{/pgfplots/every even row}	
\end{stylekey}

\begin{stylekey}{/pgfplots/every head row}	
\end{stylekey}

\begin{stylekey}{/pgfplots/every first row}	
\end{stylekey}

\begin{stylekey}{/pgfplots/every last row}	
\end{stylekey}

\subsection{Determining cell contents}
\begin{codekey}{/pgfplots/table/assign cell content}
\end{codekey}
\begin{key}{/pgfplots/table/assign cell content as number}
\end{key}

\begin{stylekey}{/pgfplots/table/string type}
\end{stylekey}

\subsection{Customizing and getting the tabular code}
\begin{stylekey}{/pgfplots/table/every table}
\end{stylekey}

\begin{key}{/pgfplots/table/font=\marg{font name} (initially empty)}
\end{key}

\begin{key}{/pgfplots/table/begin table=\marg{code} (initially \textbackslash begin\{tabular\})}
\end{key}
\begin{key}{/pgfplots/table/end table=\marg{code} (initially \textbackslash end\{tabular\})}
\end{key}

\begin{key}{/pgfplots/table/outfile=\marg{file name} (initially empty)}
	Writes the generated tabular code into \marg{file name}. It can then be used with |\input|\marg{file name}, \PGFPlotstable\ is no longer required since it contains a completely normal |tabular|.
\begin{codeexample}[]
\pgfplotstabletypesetfile[
	columns={dof,error1},
	outfile=pgfplotstable.example1.out.tex]
	{pgfplotstable.example1.dat}
\end{codeexample}
and |pgfplotstable.example1.out.tex| contains
\lstdefineformat{inp}{\\\\=\string\newline}%
\lstinputlisting[basicstyle=\ttfamily\footnotesize,format=inp]{pgfplotstable.example1.out.tex}

The command |\pgfutilensuremath| checks whether math mode is active and switches to math mode if necessary\footnote{Please note that \lstinline{\\pgfutilensuremath} needs to be replaced by \lstinline{\\ensuremath} if you want to use the output file independent of \PGF. That can be done by \lstinline{\\let\\pgfutilensuremath=\\ensuremath} which enables the \LaTeX-command \lstinline{\\ensuremath}.}.
\end{key}

\printindex

\bibliographystyle{abbrv} %gerapali} %gerabbrv} %gerunsrt.bst} %gerabbrv}% gerplain}
\bibliography{pgfplots.bib}
\end{document}
