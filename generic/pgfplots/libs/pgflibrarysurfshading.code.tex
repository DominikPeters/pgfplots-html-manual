%--------------------------------------------
% $Header: /cvsroot/pgfplots/pgfplots/generic/pgfplots/libs/pgflibrarysurfshading.code.tex,v 1.1 2009/02/25 21:47:39 ludewich Exp $
%
% Package pgfplots
%
% Provides a user-friendly interface to create function plots (normal
% plots, semi-logplots and double-logplots).
% 
% It is based on Till Tantau's PGF package.
%
% Copyright 2007/2008 by Christian Feuers√§nger.
%
% This program is free software: you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation, either version 3 of the License, or
% (at your option) any later version.
% 
% This program is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU General Public License for more details.
% 
% You should have received a copy of the GNU General Public License
% along with this program.  If not, see <http://www.gnu.org/licenses/>.
%
%--------------------------------------------

\def\pgfplotslibrarysurf@width{5cm}%
\def\pgfplotslibrarysurf@height{5cm}%
\def\pgfplotslibrarysurf@cols{4}%
\def\pgfplotslibrarysurf@binarystream{1234}%
\def\pgfplotslibrarysurf@binarystreamlength{4}%
\def\pgfplotslibrarysurf@decode{xmin xmax ymin ymax c1min c1max c2min c2max c3min c3max}%

\def\pgfplotssys@do@surfshading{%
	{%
		\setbox\pgfutil@tempboxa=\hbox to\pgfplotslibrarysurf@width{%
			\vbox to\pgfplotslibrarysurf@height{%
				\vfil
				\pdfobj stream attr {%
					/Length \pgfplotslibrarysurf@binarystreamlength
					/Shading << 
						/Sh << 
							/ShadingType 5
							/BitsPerCoordinate 32
							/BitsPerComponent 16
							/VerticesPerRow \pgfplotslibrarysurf@cols
							/ColorSpace /DeviceRGB
							/Decode [\pgfplotslibrarysurf@decode]
						>> 
					>>%
				} {%
					\pgfplotslibrarysurf@binarystream
				}%
			}%
			\hfil}%
		%--------------------------------------------------
		% \pgf@process{\pgfpoint{\pgf@max}{#2}}%
		% \pdfxform resources {%
		% 	/Shading << 
		% 		/Sh << 
		% /Length <BYTES>
		% 			/ShadingType 5
		% 			/BitsPerCoordinate 32
		% 			/BitsPerComponent 16
		% 			/VerticesPerRow \pgfplotslibrarysurf@cols
		% 			/ColorSpace /DeviceRGB
		% 			/Decode [xmin xmax ymin ymax c1min c1max c2min c2max c3min c3max ]
		% 		>> 
		% 	>>}\pgfutil@tempboxa% <<
		%-------------------------------------------------- 
		\xdef\pgfplots@glob@TMPa{\leavevmode\noexpand\pdfrefobj\the\pdflastobj}% 
	}%
	\pgfplots@glob@TMPa
}
