\documentclass[a4paper]{article}
\usepackage{german}
\usepackage[utf8]{inputenc}

\usepackage{pgfplots}
\usepackage{pgfplots.assert}

\usetikzlibrary{intersections}
\usepgflibrary{filledintersections}

\begin{document}

\begin{tikzpicture}

	% this here is the test case of
	% unittest_intersections_lib_3.00_3.tex :
	\draw[name path=A] plot coordinates {
		  (2,0) (3,1) (4,0) (5,1) (6,0)
	};

	\draw[name path=B] plot coordinates {
		(0,1) (1,0) (2,0.5) (6,0.5)
	};

	\pgfintersectionofpaths%
		{%
			\expandafter\pgfsetpath\csname tikz@intersect@path@name@A\endcsname%
		}%
		{%
			\expandafter\pgfsetpath\csname tikz@intersect@path@name@B\endcsname%
		}%

	\pgfplotsassertequalstok{4}{\pgfintersectionsolutions}{}
	\makeatletter

	\foreach \i in {1,2,...,\pgfintersectionsolutions} {%
		\begingroup
		\pgftransformshift{%
			\pgfpointintersectionsolution{\i}%
			\message{TEST OUPUT: solution \i = \the\pgf@x, \the\pgf@y^^J}%
		}%
		\node at (0,0) {\i};
		\endgroup
	}%

	\pgfpointintersectionsolution{1}%
	\pgfplotsassertequalstok{\the\pgf@x, \the\pgf@y}{71.13918pt, 14.2278pt}{solution 1}
	\pgfpointintersectionsolution{2}%
	\pgfplotsassertequalstok{\the\pgf@x, \the\pgf@y}{99.59497pt, 14.2278pt}{solution 2}
	\pgfpointintersectionsolution{3}%
	\pgfplotsassertequalstok{\the\pgf@x, \the\pgf@y}{128.05057pt, 14.2278pt}{solution 3}
	\pgfpointintersectionsolution{4}%
	\pgfplotsassertequalstok{\the\pgf@x, \the\pgf@y}{156.50636pt, 14.2278pt}{solution 4}


	\pgfintersectiongetsolutionsegmentindices{1}\Aindex\Bindex
	\pgfplotsassertequalstok{0}{\Aindex}{solution 1 path A}
	\pgfplotsassertequalstok{2}{\Bindex}{solution 1 path B}
	
	\pgfintersectiongetsolutionsegmentindices{2}\Aindex\Bindex
	\pgfplotsassertequalstok{1}{\Aindex}{solution 2 path A}
	\pgfplotsassertequalstok{2}{\Bindex}{solution 2 path B}

	\pgfintersectiongetsolutionsegmentindices{3}\Aindex\Bindex
	\pgfplotsassertequalstok{2}{\Aindex}{solution 3 path A}
	\pgfplotsassertequalstok{2}{\Bindex}{solution 3 path B}

	\pgfintersectiongetsolutionsegmentindices{4}\Aindex\Bindex
	\pgfplotsassertequalstok{3}{\Aindex}{solution 4 path A}
	\pgfplotsassertequalstok{2}{\Bindex}{solution 4 path B}


%\tracingcommands=2\tracingmacros=2

	\message{Insert intersections into FIRST argument of \string\pgfintersectionofpaths:^^J}
	{
	\def\inputValue{%
		\pgfsyssoftpath@movetotoken {56.90549pt}{0.0pt}%
		\pgfsyssoftpath@linetotoken {85.35823pt}{28.45274pt}%
		\pgfsyssoftpath@linetotoken {113.81097pt}{0.0pt}%
		\pgfsyssoftpath@linetotoken {142.26372pt}{28.45274pt}%
		\pgfsyssoftpath@linetotoken {170.71646pt}{0.0pt}%
	}
	\pgfplotsassertequalstok{\meaning\pgf@intersect@path@a}{\meaning\inputValue}{The input path}

	\message{INPUT : \meaning\pgf@intersect@path@a^^J}%

	\pgf@insert@intersections@in@path{1}%

	\message{OUTPUT: \meaning\pgfretval^^J}%
	\def\expected{%
		\pgfsyssoftpath@movetotoken {56.90549pt}{0.0pt}%
\pgfsyssoftpath@linetotoken{71.13918pt}{14.2278pt}%
		\pgfsyssoftpath@linetotoken {85.35823pt}{28.45274pt}%
\pgfsyssoftpath@linetotoken{99.59497pt}{14.2278pt}%
		\pgfsyssoftpath@linetotoken {113.81097pt}{0.0pt}%
\pgfsyssoftpath@linetotoken{128.05057pt}{14.2278pt}%
		\pgfsyssoftpath@linetotoken {142.26372pt}{28.45274pt}%
\pgfsyssoftpath@linetotoken{156.50636pt}{14.2278pt}%
		\pgfsyssoftpath@linetotoken {170.71646pt}{0.0pt}%
	}
	\pgfplotsassertequalstok{\meaning\pgfretval}{\meaning\expected}{expected value was wrong}

	\pgfsetpath\pgfretval
	\pgfusepath{stroke}
	}

	\message{Insert intersections into SECOND argument of \string\pgfintersectionofpaths:^^J}
	{
	\def\inputValue{%
		\pgfsyssoftpath@movetotoken {0.0pt}{28.45274pt}%
		\pgfsyssoftpath@linetotoken {28.45274pt}{0.0pt}%
		\pgfsyssoftpath@linetotoken {56.90549pt}{14.22636pt}%
		\pgfsyssoftpath@linetotoken {170.71646pt}{14.22636pt}%
	}
	\pgfplotsassertequalstok{\meaning\pgf@intersect@path@b}{\meaning\inputValue}{The input path}

	\message{INPUT : \meaning\pgf@intersect@path@b^^J}%

	\pgf@insert@intersections@in@path{2}%

	\message{OUTPUT: \meaning\pgfretval^^J}%
	\def\expected{%
		\pgfsyssoftpath@movetotoken {0.0pt}{28.45274pt}%
		\pgfsyssoftpath@linetotoken {28.45274pt}{0.0pt}%
		\pgfsyssoftpath@linetotoken {56.90549pt}{14.22636pt}%
\pgfsyssoftpath@linetotoken{71.13918pt}{14.2278pt}%
\pgfsyssoftpath@linetotoken{99.59497pt}{14.2278pt}%
\pgfsyssoftpath@linetotoken{128.05057pt}{14.2278pt}%
\pgfsyssoftpath@linetotoken{156.50636pt}{14.2278pt}%
		\pgfsyssoftpath@linetotoken {170.71646pt}{14.22636pt}%
	}
	\pgfplotsassertequalstok{\meaning\pgfretval}{\meaning\expected}{expected value was wrong}

	\pgfsetpath\pgfretval
	\pgfusepath{stroke}
	}
\end{tikzpicture}
\end{document}

